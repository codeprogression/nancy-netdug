<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Boise .Net Developer User Group</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <!-- Le styles -->
    <link href="/Content/less/bootstrap.less" rel="stylesheet/less">
    <style>
        body, section
        {
            padding-top: 60px; /* 60px to make the container go all the way to the bottom of the topbar */
        }
    </style>
    <link href="/Content/less/responsive.less" rel="stylesheet/less">
    <script type="text/javascript" src="/Content/Scripts/less.min.js"></script>
    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/Content/images/favicon.ico">
    <link rel="apple-touch-icon" href="/Content/images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/Content/images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/Content/images/apple-touch-icon-114x114.png">
</head>
<body data-spy="scroll" data-target=".nav-collapse" data-offset="60">
    <div class="navbar navbar-fixed-top">
        <div class="navbar-inner">
            <div class="container">
                <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                    <span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span>
                </a>
                <a class="brand" href="/#">Boise .Net Developer User Group</a>
                <div class="nav-collapse">
                    <ul class="nav">
                        <li class="active"><a href="#Home">Home</a></li>
                        <li><a href="#Location">Location</a></li>
                        <li><a href="#Schedule">Schedule</a></li>
                        <li><a href="#Events">Events</a></li>
                    </ul>
                    <ul class="nav pull-right">
                        <li style="margin-top: 5px;"><a href="https://twitter.com/netdug" class="twitter-follow-button pull-right"  data-show-count="false" data-size="large">Follow @netdug</a></li>
                    </ul>
                </div>
                
                <!--/.nav-collapse -->
            </div>
        </div>
    </div>
    <div class="container">
        
        <!-- Masthead
        ================================================== -->
        <header class="page-header"> 
            <h1>The Boise .NET Developer User Group</h1>
            <p class="lead">Meets the third Thursday of each month at 6:30pm.</p>
        </header>

        <section id="Home">
            <div class="hero-unit ">
                 <!-- DISPLAY CURRENT MONTH'S TOPIC -->
                <div class="alert alert-info ">
                    <h1 class="alert-heading pull-right"  data-bind="text:CurrentMonth.Date"></h1>
                    <h2 data-bind="ifnot: CurrentMonth.Topics().length>0">Topic not available</h2>
                    <ul class="unstyled" data-bind="foreach: CurrentMonth.Topics">
                        <li><h2><span data-bind="text: Title"></span> <small><span data-bind="text:Speaker"></span></small></h2><p class="lead"><span data-bind="text:Description"></span></p></li>
                    </ul>
                </div>

                <!-- DISPLAY NEXT MONTH'S TOPIC -->
                <div class="well well-small">
                    <h2 class="alert-heading pull-right"><span data-bind="text:NextMonth.Date"></span></h2>
                    <h3 data-bind="ifnot: NextMonth.Topics">Topic not available</h3>
                    <ul class="unstyled" data-bind="foreach: NextMonth.Topics">
                        <li><h3><span data-bind="text:Title"></span> <small><span data-bind="text:Speaker"></span></small></h3><p class="lead"><span data-bind="text:Description"></span></p></li>
                    </ul>
                    </ul>
                </div>
            </div>
        </section>
        
        <!-- Location
        ================================================== -->
        <section id="Location">
            <header class="page-header"> 
                <h1>Location</h1>
            </header>
            <address>
                <strong>Microsoft Boise</strong><br/>
                401 W Front, Suite 400<br/>
                Boise, ID 83702
            </address>
            <iframe width="425" height="350" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="https://maps.google.com/maps?q=Microsoft+Boise+401+W+Front,+Suite+400+Boise,+ID+83702&amp;ie=UTF8&amp;hq=Microsoft+Boise+401+W+Front,+Suite+400&amp;hnear=Boise,+Idaho+83702&amp;ll=43.611661,-116.201504&amp;spn=0.172486,0.275688&amp;t=m&amp;z=12&amp;iwloc=A&amp;cid=8709389908361776309&amp;output=embed"></iframe><br /><small><a href="http://maps.google.com/maps?q=Microsoft+Boise+401+W+Front,+Suite+400+Boise,+ID+83702&amp;ie=UTF8&amp;hq=Microsoft+Boise+401+W+Front,+Suite+400&amp;hnear=Boise,+Idaho+83702&amp;ll=43.611661,-116.201504&amp;spn=0.172486,0.275688&amp;t=m&amp;z=12&amp;iwloc=A&amp;cid=8709389908361776309&amp;source=embed" style="color:#0000FF;text-align:left">View Larger Map</a></small>
        </section>
        
        
        <!-- Schedule
        ================================================== -->
        <section id="Schedule">
            <header class="page-header"> 
                <h1>Schedule 
                <!-- CREATE POST ROUTE TO ADD SPEAKER -->
                    <a class="btn btn-primary pull-right" data-toggle='modal' href="#speakerModal">Add Speaker</a>    </h1> 
            </header>
            <div class="row-fluid" data-bind="foreach: YearlySchedule">
                <div class="span6">
                    <h3><span data-bind="text:Year"></span></h3>
                        <!-- ko foreach: Meetings -->
                    <dl class="dl-horizontal">
                        <dt data-bind="text:Date, foreach:Topics"></dt>
                        <!-- ko foreach: Topics -->
                        <dd><h4><span data-bind="text: Title"></span> <small><span data-bind="text:Speaker"></span></small></h4></dd>
                        <!-- /ko -->
                    </dl>
                    <!-- /ko -->
                </div>
            </div>
        </section>
        
        
        <!-- Events
        ================================================== -->
        <section id="Events">
            <header class="page-header">
                <h1>Events <small>Let go socialize!</small> 
                <!-- CREATE POST ROUTE TO ADD EVENT -->
                    <a class="btn btn-primary pull-right" data-toggle='modal' href="#eventModal">Add Event</a></h1>
            </header>
            <table class="table table-striped">
                <thead>
                    <tr><th>When</th><th>What</th><th>Where</th><th></th></tr>
                </thead>
                <tbody data-bind="foreach: Events">
                    <tr><td><span data-bind="text: Date"></span></td><td><span data-bind="text: Name"></span></td><td><span data-bind="text: Location"></span></td><td><a target="blank" data-bind="attr:{ href: Url}" class="btn btn-info btn-small "><i class="icon-info-sign icon-white"></i> More Info</a></td></tr>
                </tbody>
            </table>
        </section>
    </div>
    <footer style="height: 400px;">
        
    </footer>
    
    <div id="speakerModal" class="modal hide" data-show="false">
        <div class="modal-header">
            <button class="close" data-dismiss="modal">×</button>
            <h3>Add New Topic</h3>
        </div>
        <form  data-bind="submit: addSpeaker">
            <div class="modal-body">
                <label for="date">Meeting Date</label><input type="text" placeholder="Meeting Date" name="date" />
                <label for="speaker">Speaker</label><input type="text" placeholder="Speaker" name="speaker"/>
                <label for="title">Title</label><input type="text" placeholder="Title" name="title"/>
                <label for="description">Description</label><input type="text" placeholder="Description" name="description"/>
            </div>
            <div class="modal-footer">
                <a href="#" class="btn" data-dismiss="modal">Close</a>
                <button class="btn btn-primary" type="submit">Save changes</button>
            </div>
        </form>
    </div>
    
    <div id="eventModal" class="modal hide" data-show="false">
        <div class="modal-header">
            <button class="close" data-dismiss="modal">×</button>
            <h3>Add New Event</h3>
        </div>
        <form  data-bind="submit: addEvent">
            <div class="modal-body">
                <label for="date">When</label><input type="text" placeholder="When" name="date" />
                <label for="name">What</label><input type="text" placeholder="What" name="name"/>
                <label for="location">Where</label><input type="text" placeholder="Where" name="location"/>
                <label for="url">Url</label><input type="text" placeholder="Url" name="url"/>
            </div>
            <div class="modal-footer">
                <a href="#" class="btn" data-dismiss="modal">Close</a>
                <button class="btn btn-primary" type="submit">Save changes</button>
            </div>
        </form>
    </div>
    <!-- /container -->
    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="/Content/Scripts/jquery-1.7.2.min.js"></script>
    <script src="/Content/Scripts/bootstrap.min.js"></script>
    <script src="/Content/Scripts/knockout-2.1.0.js"></script>
    <script src="/Content/Scripts/knockout.mapping-latest.js"></script>
    <script>!function (d, s, id) { var js, fjs = d.getElementsByTagName(s)[0]; if (!d.getElementById(id)) { js = d.createElement(s); js.id = id; js.src = "//platform.twitter.com/widgets.js"; fjs.parentNode.insertBefore(js, fjs); } } (document, "script", "twitter-wjs");</script>
    
  <script type="text/javascript">

            var viewModel = ko.mapping.fromJS(@Model);
            viewModel.addSpeaker = function(form) {
                $.ajax({
                    url: "meetings",
                    type: "POST",
                    data: $(form).serialize()
                })
                    .success(function() {
                        $.ajax({
                            url: "pagemodel",
                            type: "GET"
                        }).success(function(update) {
                            ko.mapping.fromJSON(update, viewModel);
                        });
                    }).complete(function() {
                        $("#speakerModal").modal('hide');
                    });
            };
            
            viewModel.addEvent= function(form) {
                $.ajax({
                    url: "events",
                    type: "POST",
                    data: $(form).serialize()
                })
                    .success(function() {
                        $.ajax({
                            url: "pagemodel",
                            type: "GET"
                        }).success(function(update) {
                            ko.mapping.fromJSON(update, viewModel);
                        });
                    }).complete(function() {
                        $("#eventModal").modal('hide');
                    });
            };
    
        $(function() {
            ko.applyBindings(viewModel);
            
        });

    </script>
</body>
</html>
